<!DOCTYPE html>
<html>
<head>
	<title>Emotion Music</title>
</head>
<body style="background: #151117;">

	<canvas id="canvas" onmousemove="mousePosition(event)"></canvas>

</body>

	<script>

var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var width = canvas.width - 10;
var height = canvas.height - 10;
var circles = [];
var xp = 0;
var yp = 0;

function mousePosition(e) {
	xp = e.clientX;
	yp = e.clientY;
	getHover();
}

function getHover() {
	for (var i = 0; i < circles.length; i++) {
		if (Math.pow(Math.pow((xp - circles[i].x + circles[i].xs), 2) + Math.pow((yp - circles[i].y + circles[i].ys), 2), .5) < circles[i].rad + circles[i].radex) {
			circles[i].hover = 1;
		} else {
			circles[i].hover = 0;
		}
	}
}

class Circle {
	constructor(x, y, rad, r, g, b) {
		this.x = x;
		this.y = y;

		this.rad = rad;
		this.radex = 0;
		this.hover = 0;

		this.r = r;
		this.g = g;
		this.b = b;

		this.s = 0;
		this.xs = 0;
		this.ys = 0;
		this.xm = Math.random() * .01;
		this.ym = Math.random() * .01;
		this.xa = Math.random() * 2 + 4;
		this.ya = Math.random() * 2 + 4;
	}

	calcPos() {
		this.xs = Math.sin(this.s * this.xm) * this.xa;
		this.ys = Math.sin(this.s * this.ym) * this.ya;
		this.s++;
		if (!this.s % 1500) {
			this.s = 0;
			this.xm = Math.random() * .025;
			this.ym = Math.random() * .025;
			this.xa = Math.random() * 2 + 4;
			this.ya = Math.random() * 2 + 4;
		}

		if (this.hover && this.radex < this.rad * .2) {
			this.radex++;
		} else if (!this.hover && this.radex > 0) {
			this.radex--;
		}
	}

	draw(a) {
		this.calcPos();
		ctx.beginPath();
		ctx.fillStyle = "rgba(" + this.r + "," + this.g + "," + this.b + "," + a + ")";
		ctx.strokeStyle = "#111111";
		// ctx.lineWidth = 10;
		ctx.arc(this.x + this.xs, this.y + this.ys, this.rad + this.radex, 0, 2 * Math.PI);
		ctx.fill();
		// ctx.stroke();
		ctx.closePath();
	}
}

function init() {
	for (var i = 0; i < 7; i++) {
		var brightness = Math.random() * 60;
		circles.push(new Circle(Math.random() * (width - 200) + 100, Math.random() * (height - 200) + 100, Math.random() * 50 + 50, Math.random() * 7 + 60 + brightness, Math.random() * 7 + 60 + brightness, Math.random() * 7 + 60 + brightness));
	}
}

function update() {
	if (canvas.width != window.innerWidth - 10 || canvas.height != window.innerHeight - 10) {
		canvas.width = window.innerWidth - 10;
		canvas.height = window.innerHeight - 10;
		width = canvas.width;
		height = canvas.height;
	}

	ctx.clearRect(0, 0, width, height);

	for (var i = 0; i < circles.length; i++) {
		circles[i].draw(.9);
	}
}

update();
init();
setInterval(update,10);

</script>


</html>